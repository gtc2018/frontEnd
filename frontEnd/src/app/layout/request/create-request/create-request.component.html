<br>
<div class="row">
    <div class="col-xs-12 col-sm-9 col-md-9 col-lg-9 ">
<h2 class=" page-header">
        Crear Requerimiento
</h2>

    </div>
    <div *ngIf="edtReg" style="text-align:right">
        <div class="btn btn-info hand"
        (click)="createPorcentaje()">
            <i class="fa fa-plus"
            aria-hidden="true">
            </i>
            &nbsp; Agregar involucrados
        </div>
    </div>

    
</div>

<br>
<div *ngIf="!isValid" role="alert" class="alert alert-danger alert-dismissible">
        {{message}}
        <strong></strong>
</div>
<hr>
                <div class="card mb-3 ">
                        <div class=" card-header center-sc" *ngIf="newReg">
                            Nuevo registro
                        </div>

                        <div class=" card-header center-sc" *ngIf="edtReg">
                            Editar registro
                        </div>
                </div>
<form>

<div class="row col-xs-12 col-sm-12 col-md-12 col-lg-12 " >

    <div class="col-xs-12 col-sm-12 col-md-6 col-lg-6" >

            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 ">
                <div class="form-group row">
                <label class=" col-form-label-sm " style="width:25%">   *Cliente</label>
                <div class="col-xs-9 col-sm-9 col-md-9 col-lg-9">
                <select #selectCl
                 [disabled] = "disabledEnterprise"
                 [(ngModel)]="requestForm.clienteId"
                 (change)="getProyectosByCliente(selectCl.value)"
                 name="enterprise" 
                 class="form-control-sm input-underline"
                 style="width:62%">
                 
                 <option *ngFor="let e of enterprises" [value]="e.id">
                        {{e.descripcion}}
                </option>
                </select>
                </div>
                </div>
            </div>

            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 ">
                    <div class="form-group row">
                    <label class=" col-form-label-sm " style="width:25%">*Proyecto</label>
                    <div class="col-xs-9 col-sm-9 col-md-9 col-lg-9">
                    <select #selectPr
                    [disabled] = "disabledProyecto"
                    [(ngModel)]="requestForm.proyectoId"
                    (change)="getCotizacionByProyecto(selectPr.value)"
                     name="project"
                     class="form-control-sm input-underline"
                     style="width:62%">
                     <option *ngFor="let p of proyectos" [value]="p.id">
                        {{p.nombre}}
                </option>
                    </select>
                    </div>
                    </div>
            </div>

            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 ">
                    <div class="form-group row">
                    <label class=" col-form-label-sm " style="width:25%">*Cotización</label>
                    <div class="col-xs-9 col-sm-9 col-md-9 col-lg-9">
                    <select #selectCo
                    [disabled] = "disabledCotizacion"
                    (change)="getRequest(selectCo.value)"
                    [(ngModel)]="requestForm.cotizacionId"
                     name="cotizacion"
                     class="form-control-sm input-underline"
                     style="width:62%">
                     <option *ngFor="let r of cotizaciones" [value]="r.id">
                        {{r.descripcionRqm}}
                </option>
                    </select>
                    </div>
                    </div>
            </div> 

            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 ">
                    <div class="form-group row">
                    <label class=" col-form-label-sm " style="width:25%">*Código</label>
                    <div class="col-xs-8 col-sm-8 col-md-8 col-lg-8">
                    <input 
                        type="text" 
                        value={{codigoRQM}}
                        class="form-control-sm input-underline" 
                        style="width:70%" readonly>
                    </div>
                    </div>
              </div>

              <div class=" col-xs-12 col-sm-12 col-md-12 col-lg-12 ">
                    <div class="form-group row">
                    <label class=" col-form-label-sm " style="width:25%">*Descripcion</label>
                    </div>
                    <textarea
                    name="descripcion"
                    [(ngModel)]="requestForm.descripcion"
                    rows="3"
                    class="form-control"
                    placeholder="Descripcion"
                    required
                    style="width:85%"
                    maxlength="100">
                    </textarea>
              </div>
              <br>              
              
              <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 ">
                    <div class="form-group row">
                    <label class=" col-form-label-sm " style="width:25%">*Versión</label>
                    <div class="col-xs-8 col-sm-8 col-md-8 col-lg-8">
                    <input 
                        name = "version"
                        [(ngModel)]="requestForm.version"
                        type="text" 
                        class="form-control-sm input-underline" 
                        style="width:70%"
                        maxlength="15">
                    </div>
                    </div>
              </div>
            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 ">
                    <div class="form-group row">
                    <label class=" col-form-label-sm " style="width:25%">*Estado</label>
                    <div class="col-xs-8 col-sm-8 col-md-8 col-lg-8">
                    <select #selectEst
                     [(ngModel)]="requestForm.estadoId"
                     name="estado"
                     class="form-control-sm input-underline"
                     style="width:70%">
                        <option *ngFor="let e of estados" [value]="e.id">
                                {{e.descripcion}}
                        </option>
                    </select>
                    </div>
                    </div>
              </div>
              <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 ">
                    <div class="form-group row">
                    <label class=" col-form-label-sm " style="width:25%">*Fase del RQM</label>
                    <div class="col-xs-8 col-sm-8 col-md-8 col-lg-8">
                    <select #selectFR
                     [(ngModel)]="requestForm.faseId"
                     name="faseRQM"
                     class="form-control-sm input-underline"
                     style="width:70%"
                     >
                        <option *ngFor="let f of fases" [value]="f.id">
                                {{f.descripcion}}
                        </option>
                    </select>
                    </div>
                    </div>
                </div>
              <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 ">
                <div class="form-group row">
                <label class=" col-form-label-sm " style="width:25%">*Centro de costos</label>
                <div class="col-xs-8 col-sm-8 col-md-8 col-lg-8">
                <input 
                        name = "centroCosto"
                        [(ngModel)]="requestForm.centroCosto"
                        type="text" 
                        class="form-control-sm input-underline" 
                        style="width:70%"
                        maxlength="10">
                </div>
                </div>
              </div>
              <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 ">
                        <div class="form-group row">
                        <label class=" col-form-label-sm " style="width:25%">Número de casos de prueba</label>
                        <div class="col-xs-8 col-sm-8 col-md-8 col-lg-8">
                            <input 
                                    name = "numeroCasoPrueba"
                                    [(ngModel)]="requestForm.numeroCasoPrueba"
                                    type="number" 
                                    class="form-control-sm input-underline" 
                                    style="width:70%"
                                    maxlength="10">
                        </div>
                        </div>
                </div>
              <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                <div class="form-group row">
                        <label class="col-form-label-sm " style="width:24%">Adjuntos RQM</label>
                        <div class="col-xs-9 col-sm-9 col-md-9 col-lg-9">
                                <label class="hand" ondragover="return false;" (dragenter)="handleDragEnter()" (dragleave)="handleDragLeave()" (drop)="handleDrop($event)"
                                placement="top" ngbTooltip="Haga click para cargar el documento" style="width:62%">
                                        <div class="col-auto">
                                                <span class="fa {{iconUpload}} picture-marc {{styleIconUpload}}">{{nameUpload}}</span>
                                        </div>
                                        <div class="col-auto">
                                                <input type='file' (change)="handleInputChange($event)" style="display: none;">
                                        </div>
                                </label>
                        </div>
                </div>
            </div>

              

</div>

    <div class="col-xs-12 col-sm-12 col-md-6 col-lg-6" >

        
        
            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 ">
                <div class="form-group row">
                <label class=" col-form-label-sm " style="width:25%">Gestor Técnico</label>
                <div class="col-xs-8 col-sm-8 col-md-8 col-lg-8">
                <input
                    name = "gestorTecnico"
                    [(ngModel)]="requestForm.gestorTecnico"
                    type="text" 
                    class="form-control-sm input-underline" 
                    style="width:70%"
                    maxlength="100">
                </div>
                </div>
          </div>
          <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 ">
                <div class="form-group row">
                <label class=" col-form-label-sm " style="width:25%">Email G.Técnico</label>
                <div class="col-xs-8 col-sm-8 col-md-8 col-lg-8">
                <input
                    name = "emailTecnico"
                    [(ngModel)]="requestForm.emailTecnico"
                    type="text" 
                    class="form-control-sm input-underline" 
                    style="width:70%"
                    maxlength="45">
                </div>
                </div>
          </div>
          <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 ">
                <div class="form-group row">
                <label class=" col-form-label-sm " style="width:25%">Gestor Proyectos</label>
                <div class="col-xs-8 col-sm-8 col-md-8 col-lg-8">
                <input 
                    name = "gestorProyecto"
                    [(ngModel)]="requestForm.gestorProyecto"
                    type="text" 
                    class="form-control-sm input-underline" 
                    style="width:70%"
                    maxlength="100">
                </div>
                </div>
          </div>
          <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 ">
                <div class="form-group row">
                <label class=" col-form-label-sm " style="width:25%">Email G.Proyecto</label>
                <div class="col-xs-8 col-sm-8 col-md-8 col-lg-8">
                <input 
                    name = "emailProyecto"
                    [(ngModel)]="requestForm.emailProyecto"
                    type="text" 
                    class="form-control-sm input-underline" 
                    style="width:70%"
                    maxlength="45">
                </div>
                </div>
          </div>
        
            
            
                <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 ">
                        <div class="form-group row">
                                <label class=" col-form-label-sm " style="width:25%"  >*Fecha Inicio DS </label>
                                <div class="col-xs-8 col-sm-8 col-md-8 col-lg-8">
                                        <div class="input-group">
                                                <input
                                                        class="form-control-sm input-underline"
                                                        style="width:70%" 
                                                        placeholder="yyyy-mm-dd"
                                                        name="fechaInicio" 
                                                        [(ngModel)]="requestForm.fechaInicio"
                                                        ngbDatepicker
                                                        #a="ngbDatepicker"
                                                >

                                                <div class="input-group-addon" (click)="a.toggle()" >
                                                <span class="fa fa-calendar"></span>
                                                </div>
                                        </div>
                                </div>
                        </div>
                </div>
                <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 ">
                        <div class="form-group row">
                                <label class=" col-form-label-sm " style="width:25%">*Fecha Planeacion Entrega DS</label>
                                <div class="col-xs-8 col-sm-8 col-md-8 col-lg-8">
                            <div class="input-group">
                          <input
                                class="form-control-sm input-underline"
                                style="width:70%" 
                                placeholder="yyyy-mm-dd"
                                name="fechaPlaneadaEntrega" 
                                [(ngModel)]="requestForm.fechaPlaneadaEntrega"
                                ngbDatepicker
                                #b="ngbDatepicker"
                                >

                          <div class="input-group-addon" (click)="b.toggle()" >
                              <span class="fa fa-calendar"></span>
                          </div>
                        </div>
                      </div>
                </div>
                </div>
                <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 ">
                        <div class="form-group row">
                                <label class=" col-form-label-sm " style="width:25%">*Fecha Real Entrega DS</label>
                                <div class="col-xs-8 col-sm-8 col-md-8 col-lg-8">
                                        <div class="input-group">
                                                <input 
                                                        class="form-control-sm input-underline"
                                                        style="width:70%" 
                                                        placeholder="yyyy-mm-dd"
                                                        name="fechaEntrega" 
                                                        [(ngModel)]="requestForm.fechaEntrega"
                                                        ngbDatepicker
                                                        #c="ngbDatepicker"
                                                        >

                                                <div class="input-group-addon" (click)="c.toggle()" >
                                                        <span class="fa fa-calendar"></span>
                                                </div>
                                        </div>
                                </div>
                        </div>
                </div>
                
                <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 ">
                        <div class="form-group row">
                        <label class=" col-form-label-sm " style="width:55%">Número de Hhallazgos Bloqueantes (Se dio respuesta hasta 8 horas)</label>
                        <div class="col-xs-3 col-sm-3 col-md-3 col-lg-3">
                        <input 
                                name="numeroHallazgoBloqueante"
                                [(ngModel)]="requestForm.numeroHallazgoBloqueante"
                                type="number" 
                                class="form-control-sm input-underline" 
                                style="width:70%"
                                maxlength="10"
                                (change)="totalHallazgos()" >
                        </div>
                        </div>
                </div>
                <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 ">
                        <div class="form-group row">
                        <label class=" col-form-label-sm " style="width:55%">Número de Hallazgos Funcionales (Se dio respuesta hasta 16 horas)</label>
                        <div class="col-xs-3 col-sm-3 col-md-3 col-lg-3">
                        <input 
                                name="numeroHallazgoFuncional"
                                [(ngModel)]="requestForm.numeroHallazgoFuncional"
                                type="number" 
                                class="form-control-sm input-underline" 
                                style="width:70%"
                                maxlength="10"
                                (change)="totalHallazgos()" >
                        </div>
                        </div>
                </div>
                <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 ">
                        <div class="form-group row">
                        <label class=" col-form-label-sm " style="width:55%">Número de Hallazgos Presentación (Se dio respuesta hasta 24 horas)</label>
                        <div class="col-xs-3 col-sm-3 col-md-3 col-lg-3">
                        <input 
                                name="numeroHallazgoPresentacion"
                                [(ngModel)]="requestForm.numeroHallazgoPresentacion"
                                type="number" 
                                class="form-control-sm input-underline" 
                                style="width:70%"
                                maxlength="10"
                                (change)="totalHallazgos()" >
                        </div>
                        </div>
                </div>
                <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 ">
                        <div class="form-group row">
                        <label 
                                class=" col-form-label-sm " style="width:55%">Número total de hallazgos reportados (Incluye todos los reportados)</label>
                        <div class="col-xs-3 col-sm-3 col-md-3 col-lg-3">
                        <input 
                                value = {{totalHallazgo}}  
                                type="number" 
                                class="form-control-sm input-underline" style="width:70%" readonly>
                        </div>
                        </div>
                </div>
                
    </div>
    <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12" >
        <br>
        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 center-sc" >
              <input 
              type="submit"
              class="btn btn-success hand"
              value="Guardar"
              (click)="save()"           
              />

              <input style="margin-left:10px"
               *ngIf="visible"
               type="button"
               class="btn btn-danger hand"
               value="Eliminar"
               (click)="delete(requestForm)" />

               <input style="margin-left:10px"
               type="button"
               routerLink={{ruta}}
               class="btn btn-danger hand"
               value="Volver" />
        </div>
    </div>
    <br><br>
</div>
</form>
